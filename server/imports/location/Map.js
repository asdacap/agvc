import Resources from '../Resources';
import Point from 'point-at-length';

let Map = {
  points: [],
  paths: [
    {
      id: "outRight",
      svgPathD: "m 844.17858,578.68419 151.2249,-0.0395 c 25.99242,0 47.06362,-19.40369 47.06362,-43.33934 0,-23.93565 -21.0712,-43.33933 -47.06362,-43.33933 l -54.32765,0.10728 c -25.99246,0 -47.06352,-19.40369 -47.06352,-43.33933 0,-23.93565 21.07106,-43.33934 47.06352,-43.33934 l 54.45126,-0.038 c 25.99241,0 47.06361,-19.40369 47.06361,-43.33934 0,-23.93564 -21.0712,-43.33933 -47.06361,-43.33933 l -54.2182,0.10736 c -25.99246,0 -47.06351,-19.40368 -47.06351,-43.33933 0,-23.93566 21.07105,-43.33934 47.06351,-43.33934 l 27.4026,-0.12074 c 41.34181,0 74.62431,-29.00967 74.62431,-65.04412 l 0,-63.43024 c 0,-36.034445 -33.2825,-65.044124 -74.62431,-65.044124 l -44.57097,0 -442.37852,-1.829982 -35.82304,32.988329 0.26288,60.628017",
      machineSpeed: 500
    },
    {
      id: "inRight",
      svgPathD: "m 446.20184,130.25379 0.24605,56.7446 c 0,23.93565 21.07105,43.33933 47.06353,43.33933 25.99246,0 47.06352,-19.40368 47.06352,-43.33933 l 1.01871,-44.49177 c 0,-23.93565 21.07106,-43.33933 47.06353,-43.33933 25.99246,0 47.06352,19.40368 47.06352,43.33933 l 0.27133,44.49177 c 0,23.93565 21.07105,43.33933 47.06352,43.33933 25.99246,0 47.06352,-19.40368 47.06352,-43.33933 l 0.28134,-43.81268 c 0,-23.93565 21.07105,-43.33933 47.06352,-43.33933 25.99246,0 47.06352,19.40368 47.06352,43.33933 l 2.61646,226.27796 0,49.00428 c 0,27.83911 -13.62235,50.2511 -47.84277,50.2511 l -64.267,0 c -34.22044,0 -48.53042,-22.41264 -48.32302,-50.2511 l 0.36831,-49.439 c -0.47211,-28.27384 -23.9355,-50.68585 -52.0367,-50.68585 l -38.78173,0 -148.19871,0.0387",
      machineSpeed: 500
    },
    {
      id: "outLeft",
      svgPathD: "m 428.06229,318.3818 -191.42073,0.05 c -25.9925,0 -47.0635,19.40369 -47.0635,43.33935 0,23.93564 21.071,43.33932 47.0635,43.33932 l 54.32763,-0.10727 c 25.99248,0 47.06354,19.40367 47.06354,43.33932 0,23.93565 -21.07106,43.33934 -47.06354,43.33934 l -54.45125,0.038 c -25.9925,0 -47.06348,19.40368 -47.06348,43.33932 0,23.93565 21.07098,43.33934 47.06348,43.33934 l 54.2182,-0.10735 c 25.99247,0 47.06352,19.40368 47.06352,43.33933 0,23.93565 -21.07105,43.33932 -47.06352,43.33932 l -27.4026,0.12074 c -41.34186,0 -74.62434,29.00968 -74.62434,65.04413 l 0,63.43024 c 0,36.03442 33.28248,65.0441 74.62434,65.0441 l 44.57097,0 442.37852,1.82997 35.82305,-32.98834 -0.30251,-69.76628",
      machineSpeed: 500
    },
    {
      id: "inLeft",
      svgPathD: "m 785.80357,757.68452 -0.20643,-47.60628 c 0,-23.93565 -21.07106,-43.33934 -47.06352,-43.33934 -25.99247,0 -47.06353,19.40369 -47.06353,43.33934 L 690.45138,754.57 c 0,23.93565 -21.07106,43.3393 -47.06352,43.3393 -25.99248,0 -47.06353,-19.40365 -47.06353,-43.3393 L 596.053,710.0782 c 0,-23.93565 -21.07105,-43.33934 -47.06351,-43.33934 -25.99247,0 -47.06353,19.40369 -47.06353,43.33934 l -0.28134,43.81268 c 0,23.93565 -21.07105,43.33935 -47.06351,43.33935 -25.99247,0 -47.06354,-19.4037 -47.06354,-43.33935 l -2.61644,-226.27796 0,-49.00429 c 0,-27.83911 13.62234,-50.25111 47.84277,-50.25111 l 64.267,0 c 34.22044,0 48.53041,22.41265 48.32301,50.25111 l -0.36831,49.439 c 0.4721,28.27384 23.9355,50.68586 52.0367,50.68586 l 38.78173,0 188.39455,-0.0493",
      machineSpeed: 500
    }
  ]
};

Map.extraSVG = Resources.map_extra;

Map.getPath = function(pathId){
  return _.find(Map.paths, p => p.id == pathId);
}

Map.getPoint = function(pointId){
  return _.find(Map.points, p => p.id == pointId);
}

Map.paths.forEach(path => {
  if(Meteor.isClient){
    var pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
    pathEl.setAttribute("d", path.svgPathD);
    path.length = pathEl.getTotalLength();
  }else{
    var pts = Point(path.svgPathD);
    path.length = pts.length;
  }
});

export default Map
